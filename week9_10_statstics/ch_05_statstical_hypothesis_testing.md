# ch5. 통계적 가설검정

## 통계적 가설 검정

예시)

회사원 안유의 주임은 금년도 12월 매출이 지난 10년간의 12월 평균 매출보다 1000만원 증가했다는 사실을 보고서 작성 중에 발견하였습니다. 금번 12월은 안 주임이 새로이 계획한 판매 전략을 시험한 달입니다. 이에 안유임 주임은 새로운 판매 전략이 12월 매출을 1000만원 증가시켰다고 보고서 작성하였습니다.

안유의 주임의 새로운 판매 전략이 매출을 증대시켰다고 주장을 하기 위해서 통계적인 방법을 사용할 수 있습니다. 우연히 매출이 1000만원 증가했을 확률 값을 계산하고, 그 확률이 충분히 낮다면(유의 수준보다 낮다면) 새로운 판매전략이 유효했다는 주장을 할 수 있는 것입니다. 

이를 통계적 가설 검정이라고 부르고, 자료의 형태에 따라서 수많은 기법들이 있습니다. 우리 과정에서는 가장 대표적인 기법들을 배우고, 현실의 데이터에 어떻게 적용되는지 살펴볼 것입니다.

## 통계적 가설

가설(hypothesis)란 확률 분포에 대한 어떠한 주장이며 이를 증명하는 행위를 검정(testing)이라 합니다.

$$H_{0}: D_{A-B}=0$$

$$H_{a}: D_{A-B}\neq0$$

- H0는 한국어로는 귀무가설, 영어로는 null hypothesis라고 부릅니다. 귀무 가설은 무로 돌아가는 가설이라는 의미로, 이 가설이 맞다면 아무 일도 없을 거라는 가설입니다.
- Ha는 한국어로는 대립가설, 영어로는 alternative hypothesis라고 부릅니다. 귀무가설을 대체하는 가설입니다.
- 통계적 가설 검정이란 귀무 가설과 대립가설을 세우고, 통계적 증거를 찾아서 귀무 가설을 기각하는 과정을 말합니다.

### 귀무가설과 대립가설

- “어떤 사건이 우연히 일어날 확률”을 구할 때 p-value를 사용하는데, 그 사건이 우연히 일어났다고 가정하는 것이 귀무가설, 그 사건이 우연히 일어난 것이 아닐고 뭔가 이유가 있다라고 가정하는 것이 대립가설이다.
- 귀무 가설이 맞다면 그 사건은 우연히 일어난 것으로 추정하고, 대립 가설이 맞다면 우연히 일어난 것이 아닌 뭔가 이유(인과관계)가 있다고 추정하는 것.

예시)

회사원 안유의 주임은 금년도 12월 매출이 지난 10년간의 12월 평균 매출보다 1000만원 증가했다는 사실을 보고서 작성 중에 발견함. 금번 12월은 안 주임이 새로이 계획한 판매 전략을 시험했던 터. 이에 안유임 주임은 새로운 판매 전략이 12월 매출을 1000만원 증가시켰다고 보고서 작성

귀무가설: 금년도 12월 매출과 지난 10년간의 12월 평균 매출의 차이는 없다. 즉, 금년도 12월 매출이 1000만원 더 많이 나온 것은 우연이다.

대립가설: 금년도 12월 매출과 지난 10년간의 12월 평균 매출의 차이가 있다. 즉, 금년도 12월 매출이 1000만원 더 많이 나온 것은 우연이 아니고, 이는 안주임의 신규 판매 전략이 효과과 있었다고 추정할 수 있다.

이 두 가설 중 어떤 것을 선택하느냐는 p-value에 달려있습니다. p-value가 유의 수준 0.05보다 작다면 대립가설을 선택, 0.05보다 크다면 귀무가설을 선택합니다. 즉, 금년도 12월 매출이 우연히 1000만원 더 나올 확률이 5%보다 작으면 이는 우연이 아니고, 신규 판매 전략이 효과가 있다고 추정할 수 있습니다. 그러나 5%보다 크다면 그냥 우연히 1000만원의 매출이 증가한 것입니다.

### 통계적 오류

통계적 추론에서는 오류가 필연적으로 수반됩니다. 오류는 크게 1종 오류와 2종 오류로 분류됩니다.

|  | 귀무 가설 기각 불가 | 귀무 가설 기각 |
| --- | --- | --- |
| 귀무 가설 참 | 올바른 결정(1-α) | 제 1종 오류(α) |
| 귀무 가설 거짓 | 제 2종 오류(β) | 올바른 결정(1-β) |

1종 오류: 귀무 가설이 참인데 기각해버리는 오류

2종 오류: 귀무 가설이 거짓인데 기각하지 못하는 오류

통계적 가설을 검정하는데 2 가지 오류를 범할 수 있습니다. 하나는 귀무 가설이 참인데 기각하는 1종 오류이고, 다른 하나는 귀무 가설이 거짓임에도 기각하지 못하는 2종 오류입니다. 둘 중에 어느 오류가 더 치명적일까요? 바로 귀무 가설이 참임에도 기각해버리는 1종 오류가 더 치명적입니다.

안유의 주임의 예시로 돌아가보면 안주임의 판매전략은 아무 효과가 없는데 효과가 있다고 하는 꼴이기 때문입니다. 때문에 통계적 가설 검정에서는 허용 가능한 1종 오류의 최대 수준을 고정하며, 이를 유의 수준이라고 합니다. 유의 수준으로는 보통 0.05를 사용합니다. 그 다음, 우연히 발생했을 확률인 p-value를 측정한 뒤, p-value가 유의 수준보다 낮으면 귀무 가설을 기각합니다. 유의 수준보다 크다면 귀무가설을 기각하지 못합니다.

## 확률 변수의 종류 
### 독립변수(independent variable)
- 인과관계에서 원인이 되는 변수를 독립변수라고 합니다. 
- 예측 변수, 설명 변수라고도 합니다.

### 종속 변수(dependent variable)
- 인과관계에서 원인에 종속되는 변수, 즉 결과가 되는 변수를 종속 변수라고 합니다. 
- 반응 변수, 결과 변수라고도 합니다.

### 통제 변수(control variable)
- 기본적으로 독립 변수와 동일. 연구자의 주된 관심사에서 벗어난 변수가 통제 변수.
- 예시) 고객 만족이 높을 수록 재방문율이 높을 것이다. 
    - 그런데 재방문율에 영향을 미치는 변수가 오직 고객만족 한개일리 없음. 
    - 따라서 재방문율에 영향을 미칠만한 다른 중요한 변수를 같이 감안해야함. 
    - 다른 중요한 변수를 감안하고서도 고객 만족이 중요한 역할을 한다면, 고객 만족은 정말 중요한 변수임.
    - 통제변수를 한개도 감안하지 않는 경우 Model Misspecification이 일어남. 
    - 독립변수와 종속변수만 놓고 연구를 하면 안되고, 통제 변수들도 함께 고려해야함.
    

## 앞으로 배울 통계적 가설 검정

- z-test
    - 모집단의 표준편차를 알 때, 모집단의 평균과 표본 집단의 평균이 같은지 검정
- t-test
    - one sample t-test: 단일 표본의 평균이 특정 값과 같은지 비교
    - two sample t-test: 서로 독립된 두 집단의 평균이 서로 같은지 비교
    - paired sample t-test: 같은 집단에 대해 특정 처리를 가하기 전과 후를 비교
- chi-squre test
    - test for independence: 서로 다른 두 범주형 변수가 서로 연관이 있는지 비교
- ANOVA
    - one-way ANOVA: 서로 다른 세개 이상의 집단의 평균이 같은지 다른지 비교
